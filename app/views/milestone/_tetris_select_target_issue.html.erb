<div class="issue-auto-schedule">
  <h3>ë©”ì¸ ì¼ê° ë‹¨ìœ„ ìë™ ë°°ì¹˜</h3>
  <p style="color: #666; margin-bottom: 20px;">
    ë©”ì¸ ì¼ê°ì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ìœ„ ì¼ê°ë“¤ì˜ ì¼ì •ì„ ìë™ìœ¼ë¡œ ë°°ì¹˜í•©ë‹ˆë‹¤.<br>
    ë©”ì¸ ì¼ê°ì˜ IDë¥¼ ì…ë ¥í•˜ì—¬ ìë™ ë°°ì¹˜ë¥¼ ì‹œì‘í•˜ì„¸ìš”.
  </p>
  
  <div class="issue-input-section">
    <div class="form-group">
      <label for="issue-id-input">ì¼ê° ID:</label>
      <input type="number" id="issue-id-input" placeholder="ì¼ê° IDë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="issue-id-field" min="1">
    </div>
    
    <div class="form-actions">
      <button type="button" id="start-auto-schedule" class="button button-primary" disabled>
        âš¡ ì‹œì‘
      </button>
    </div>
  </div>
  
  <div class="help-text">
    <h4>ğŸ’¡ ì‚¬ìš© ë°©ë²•</h4>
    <ul>
      <li>ë©”ì¸ ì¼ê°ì˜ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”</li>
      <li>í•´ë‹¹ ì¼ê°ì˜ í•˜ìœ„ ì¼ê°ë“¤ì´ ìë™ìœ¼ë¡œ ë°°ì¹˜ë©ë‹ˆë‹¤</li>
      <li>ì¶”ì • ì‘ì—… ì‹œê°„ì´ ì„¤ì •ëœ ì¼ê°ë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤</li>
    </ul>
  </div>
</div>

<script>
$(document).ready(function() {
  var projectId = '<%= params[:project_id] %>';
  
  // ì…ë ¥ì°½ ë³€ê²½ ì´ë²¤íŠ¸
  $('#issue-id-input').on('input', function() {
    var issueId = $(this).val().trim();
    var startButton = $('#start-auto-schedule');
    
    if (issueId && !isNaN(issueId) && parseInt(issueId) > 0) {
      startButton.prop('disabled', false);
    } else {
      startButton.prop('disabled', true);
    }
  });
  
  // ì—”í„°í‚¤ ì²˜ë¦¬
  $('#issue-id-input').on('keypress', function(e) {
    if (e.which === 13) { // Enter key
      $('#start-auto-schedule').click();
    }
  });
  
  // ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
  $('#start-auto-schedule').click(function() {
    var issueId = $('#issue-id-input').val().trim();
    
    if (issueId && !isNaN(issueId) && parseInt(issueId) > 0) {
      var url = '/projects/' + projectId + '/milestone/tetris/issues/' + issueId;
      window.location.href = url;
    } else {
      alert('ì˜¬ë°”ë¥¸ ì¼ê° IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }
  });
});
</script>

<style>
.issue-auto-schedule {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin: 20px 0;
}

.issue-auto-schedule h3 {
  margin-top: 0;
  color: #333;
  font-size: 1.2em;
}

.issue-input-section {
  background: #f9f9f9;
  padding: 20px;
  border-radius: 5px;
  margin: 20px 0;
}

.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #333;
}

.issue-id-field {
  width: 200px;
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
  transition: border-color 0.3s;
}

/* ìŠ¤í•€ ë²„íŠ¼ ì œê±° */
.issue-id-field::-webkit-outer-spin-button,
.issue-id-field::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.issue-id-field[type=number] {
  -moz-appearance: textfield;
}

.issue-id-field:focus {
  outline: none;
  border-color: #4CAF50;
  box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
}

.form-actions {
  margin-top: 15px;
}


.help-text {
  margin-top: 20px;
  padding: 15px;
  background-color: #f0f8ff;
  border-radius: 5px;
  border-left: 4px solid #4CAF50;
}

.help-text h4 {
  margin-top: 0;
  color: #333;
}

.help-text ul {
  margin-bottom: 0;
}

.help-text li {
  margin-bottom: 5px;
  color: #666;
}
</style>

